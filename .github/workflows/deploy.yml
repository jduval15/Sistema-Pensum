name: Deploy

on:
  push:
    branches: [ main ]
  workflow_dispatch:  # Permite ejecutar manualmente

jobs:
  deploy-info:
    name: InformaciÃ³n de Deployment
    runs-on: ubuntu-latest

    steps:
      - name: Checkout cÃ³digo
        uses: actions/checkout@v3

      - name: InformaciÃ³n del deployment
        run: |
          echo "ğŸš€ Sistema de Control de Pensum - Ready to Deploy"
          echo ""
          echo "ğŸ“¦ VersiÃ³n: $(date +%Y.%m.%d)"
          echo "ğŸŒ¿ Branch: ${{ github.ref_name }}"
          echo "ğŸ‘¤ Autor: ${{ github.actor }}"
          echo "ğŸ’¬ Commit: ${{ github.event.head_commit.message }}"
          echo ""
          echo "Para deployar este proyecto, puedes usar:"
          echo "  - Vercel (Frontend)"
          echo "  - Railway (Backend + Database)"
          echo "  - Render (Full Stack)"
          echo "  - Heroku (Full Stack)"
          echo ""
          echo "ğŸ“š Ver INSTRUCCIONES.md para mÃ¡s detalles"

  build-check:
    name: Verificar Build de ProducciÃ³n
    runs-on: ubuntu-latest

    steps:
      - name: Checkout cÃ³digo
        uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Build Backend
        working-directory: ./backend
        run: |
          npm ci
          npx prisma generate
          echo "âœ… Backend listo para producciÃ³n"

      - name: Build Frontend
        working-directory: ./frontend
        run: |
          npm ci
          npm run build
          echo "âœ… Frontend compilado para producciÃ³n"
          ls -lh dist/

      - name: Deployment Ready
        run: |
          echo "âœ… El proyecto estÃ¡ listo para ser deployado"
          echo "ğŸ“ Archivos de build generados correctamente"
